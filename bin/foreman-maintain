#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.expand_path('../../lib', __FILE__))

require 'foreman_maintain'

require 'pp'

ForemanMaintain.setup
puts "Detected features:"
pp ForemanMaintain.detect_features

puts "Detected scenarios:"
detected_scenarios = ForemanMaintain.detect_scenarios
pp detected_scenarios

scenario = Scenarios::PreUpgradeCheckSatellite_6_2

unless detected_scenarios.include?(scenario)
  "#{scenario} not detected among #{detected_scenarios}"
  exit
end

reporter = ForemanMaintain::Reporter::StdoutReporter.new
runner = ForemanMaintain::Runner.new(reporter, scenario.new)
runner.run
